<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Così è (se vi pare) — Pirandello</title>
  <style>
    :root{
      --bg:#0f141a;
      --panel:rgba(255,255,255,.08);
      --panel2:rgba(0,0,0,.14);
      --stroke:rgba(255,255,255,.16);
      --stroke2:rgba(255,255,255,.12);
      --text:rgba(255,255,255,.90);
      --muted:rgba(255,255,255,.70);
      --muted2:rgba(255,255,255,.55);
      --accent:#f0c36a;
      --paper:#f4efe6;
      --ink:#1a1a1a;
      --shadow: 0 20px 55px rgba(0,0,0,.45);
      --radius: 18px;
      --radius2: 14px;
      --font: ui-serif, Georgia, "Times New Roman", Times, serif;
      --ui: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;

      --paperLine: rgba(0,0,0,.06);
      --paperEdge: rgba(0,0,0,.10);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background:
        radial-gradient(1200px 800px at 20% 15%, rgba(255,255,255,.12), transparent 55%),
        radial-gradient(900px 600px at 80% 30%, rgba(240,195,106,.18), transparent 55%),
        radial-gradient(900px 600px at 50% 90%, rgba(130,200,255,.12), transparent 60%),
        var(--bg);
      color:var(--text);
      font-family:var(--ui);
    }

    .wrap{
      max-width: 1250px;
      margin: 22px auto;
      padding: 0 14px 30px;
    }

    header.top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 12px 14px;
      border:1px solid var(--stroke2);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(0,0,0,.10));
      box-shadow: 0 10px 30px rgba(0,0,0,.28);
      backdrop-filter: blur(8px);
    }
    header.top .title{
      display:flex;
      flex-direction:column;
      gap:2px;
      min-width: 0;
    }
    header.top .title b{
      font-size: 16px;
      letter-spacing:.2px;
    }
    header.top .title span{
      color:var(--muted2);
      font-size: 12.5px;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
      max-width: 620px;
    }
    .tools{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .toggle{
      display:inline-flex;
      background: rgba(0,0,0,.20);
      border:1px solid var(--stroke2);
      border-radius: 999px;
      overflow:hidden;
    }
    .toggle button{
      appearance:none;
      border:0;
      background:transparent;
      color:var(--text);
      font-family:var(--ui);
      font-weight:800;
      padding:8px 12px;
      cursor:pointer;
      font-size: 12px;
    }
    .toggle button.active{
      background: rgba(240,195,106,.22);
      color: rgba(255,255,255,.92);
    }
    .ctrl{
      display:flex;
      align-items:center;
      gap:8px;
      color:var(--muted);
      font-size: 12px;
      font-weight:700;
    }
    .ctrl input[type="range"]{ width: 120px; }

    .book{
      margin-top: 16px;
      display:grid;
      grid-template-columns: 360px 1fr;
      gap: 14px;
      align-items: start;
    }

    @media (max-width: 980px){
      .book{ grid-template-columns: 1fr; }
    }

    /* LEFT */
    .side{
      position: sticky;
      top: 14px;
      border-radius: var(--radius);
      border:1px solid var(--stroke2);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(0,0,0,.14));
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .author-card{
      padding: 14px 14px 10px;
      border-bottom:1px solid var(--stroke2);
    }
    .author-card .frame{
      border-radius: 16px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.15);
      cursor:pointer;
      position: relative;
    }
    .author-card img{
      width:100%;
      display:block;
      height: 280px;
      object-fit: cover;
      filter: contrast(1.02) saturate(1.05);
    }
    .author-card .hint{
      position:absolute;
      left:10px; bottom:10px;
      font-size: 12px;
      font-weight:900;
      letter-spacing:.2px;
      padding:6px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,.55);
      border:1px solid rgba(255,255,255,.18);
      color: rgba(255,255,255,.92);
      backdrop-filter: blur(6px);
    }

    .video-box{
      display:none;
      width:100%;
      height: 280px;
      background:#000;
    }
    .video-box iframe{
      width:100%;
      height:100%;
      border:0;
      display:block;
    }

    .index{
      padding: 10px 14px 14px;
    }
    .index h3{
      margin: 0 0 10px;
      font-size: 12px;
      color: var(--muted);
      letter-spacing:.3px;
      text-transform: uppercase;
    }
    .index a{
      display:block;
      padding: 10px 10px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.14);
      margin-bottom: 8px;
      color: rgba(255,255,255,.88);
      text-decoration:none;
      font-weight:800;
      font-size: 13px;
    }
    .index a:hover{ background: rgba(240,195,106,.14); border-color: rgba(240,195,106,.35); }
    .index a.active{
      background: rgba(240,195,106,.20);
      border-color: rgba(240,195,106,.45);
      box-shadow: 0 10px 24px rgba(240,195,106,.10);
    }

    .notes-btn{
      width: calc(100% - 28px);
      margin: 0 14px 14px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.20);
      color: rgba(255,255,255,.90);
      font-weight: 900;
      font-family: var(--ui);
      padding: 10px 12px;
      cursor:pointer;
    }
    .notes-btn:hover{ background: rgba(240,195,106,.14); border-color: rgba(240,195,106,.35); }

    /* RIGHT (PAGES) */
    .stage{
      border-radius: var(--radius);
      border:1px solid var(--stroke2);
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(0,0,0,.16));
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .pages{
      padding: 14px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }
    .book.two .pages{
      grid-template-columns: 1fr 1fr;
    }
    @media (max-width: 980px){
      .book.two .pages{ grid-template-columns: 1fr; }
    }

    .page{
      background:
        linear-gradient(180deg, rgba(255,255,255,.60), rgba(255,255,255,.75)),
        repeating-linear-gradient(
          to bottom,
          transparent 0px,
          transparent 28px,
          var(--paperLine) 29px
        );
      color: var(--ink);
      border-radius: var(--radius);
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: 0 16px 40px rgba(0,0,0,.28);
      padding: 16px 18px;
      position: relative;
      overflow:hidden;
    }
    .page:before{
      content:"";
      position:absolute;
      inset:0;
      pointer-events:none;
      background: linear-gradient(90deg, rgba(0,0,0,.06), transparent 12%, transparent 88%, rgba(0,0,0,.05));
      opacity:.55;
    }
    .page .inner{
      position:relative;
      z-index:1;
      font-family: var(--font);
    }
    .page h1{
      margin: 0 0 10px;
      font-size: 28px;
      letter-spacing:.2px;
    }
    .page h2{
      margin: 16px 0 8px;
      font-size: 20px;
      letter-spacing:.2px;
    }
    .page p{
      margin: 0 0 12px;
      font-size: 17px;
    }
    .page ul{
      margin: 6px 0 14px 18px;
      padding:0;
    }
    .page li{ margin: 6px 0; font-size: 16.5px; }

    .meta{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin: 10px 0 12px;
      font-family: var(--ui);
    }
    .meta span{
      font-size: 12px;
      padding:6px 10px;
      border-radius: 999px;
      border:1px solid rgba(0,0,0,.12);
      background: rgba(0,0,0,.04);
      font-weight:800;
      color: rgba(0,0,0,.72);
    }

    figure.inline-media{
      /* immagini "incastrate" nel flusso: mai oltre la pagina */
      max-width: 760px;
      margin: 12px auto 14px;
      border-radius: 16px;
      border:1px solid rgba(0,0,0,.12);
      background: rgba(255,255,255,.45);
      overflow:hidden;
      box-shadow: 0 10px 22px rgba(0,0,0,.14);
    }
    figure.inline-media img.thumb{
      width:100%;
      display:block;
      cursor: zoom-in;
    }
    figure.inline-media figcaption{
      font-family: var(--ui);
      font-size: 12px;
      padding: 10px 12px;
      color: rgba(0,0,0,.70);
      border-top:1px solid rgba(0,0,0,.10);
    }

    .quote{
      border-left: 4px solid rgba(240,195,106,.85);
      padding: 10px 12px;
      margin: 14px 0;
      background: rgba(240,195,106,.18);
      border-radius: 12px;
      font-style: italic;
      font-size: 16.5px;
    }

    /* ====== BRANI (tendina) ====== */
    .brano{
      margin: 14px 0 10px;
      padding: 12px 12px;
      border-radius: 14px;
      border:1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.45);
      box-shadow: 0 10px 20px rgba(0,0,0,.10);
    }
    .brano h2{ margin: 0 0 6px; }
    .brano .spiega{
      margin: 0 0 8px;
      font-family: var(--font);
    }
    details.toggle-brano{
      border-radius: 12px;
      border:1px solid rgba(0,0,0,.10);
      background: rgba(0,0,0,.04);
      overflow:hidden;
      margin-top: 8px;
      font-family: var(--ui);
    }
    details.toggle-brano summary{
      cursor:pointer;
      padding: 10px 12px;
      font-weight: 900;
      list-style: none;
      user-select:none;
      color: rgba(0,0,0,.82);
    }
    details.toggle-brano summary::-webkit-details-marker{ display:none; }
    details.toggle-brano[open] summary{
      border-bottom: 1px solid rgba(0,0,0,.10);
      background: rgba(240,195,106,.18);
    }
    .testo-brano{
      padding: 10px 12px 12px;
      font-family: var(--font);
      color: rgba(0,0,0,.90);
    }
    .testo-brano .txt p{ margin: 0 0 10px; }
    .testo-brano .txt p:last-child{ margin-bottom:0; }

    /* ====== IMAGE MODAL (zoom/pan/reset + resize) ====== */
    .img-pop{
      display:none;
      position:fixed;
      inset:0;
      background: rgba(0,0,0,.72);
      z-index: 999;
      padding: 18px;
    }
    .img-pop.open{ display:block; }
    .img-pop .panel{
      margin: 0 auto;
      max-width: min(1100px, 96vw);
      height: min(82vh, 680px);
      background: rgba(20,24,30,.92);
      border:1px solid rgba(255,255,255,.18);
      border-radius: 18px;
      box-shadow: 0 20px 70px rgba(0,0,0,.55);
      overflow:hidden;
      position: relative;
    }
    .pop-top{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      padding: 10px 12px;
      border-bottom:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.20);
      font-family: var(--ui);
    }
    .pop-top .title{
      font-weight: 900;
      letter-spacing:.2px;
      color: rgba(255,255,255,.92);
      font-size: 13px;
      overflow:hidden;
      white-space:nowrap;
      text-overflow:ellipsis;
      max-width: 64%;
    }
    .pop-actions{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .pop-actions button{
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      color: rgba(255,255,255,.92);
      padding:6px 10px;
      border-radius: 999px;
      cursor:pointer;
      font-weight:900;
      font-size: 12px;
      font-family: var(--ui);
    }
    .pop-actions button:hover{ background: rgba(240,195,106,.18); border-color: rgba(240,195,106,.35); }
    .pop-body{
      position: relative;
      height: calc(100% - 46px);
      overflow:hidden;
      cursor: grab;
    }
    .pop-body img{
      position:absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%) scale(1);
      transform-origin: center center;
      max-width: none;
      max-height: none;
      user-select:none;
      -webkit-user-drag:none;
      image-rendering: auto;
    }
    .pop-body img:active{ cursor: grabbing; }

    .resize-handle{
      position:absolute;
      right:10px;
      bottom:10px;
      width: 18px;
      height: 18px;
      border-radius: 4px;
      background: rgba(240,195,106,.70);
      box-shadow: 0 8px 20px rgba(0,0,0,.45);
      cursor: nwse-resize;
      border:1px solid rgba(0,0,0,.25);
    }

    /* ====== NOTES WINDOW ====== */
    .notes{
      position: fixed;
      right: 26px;
      bottom: 26px;
      width: 320px;
      height: 280px;
      background: rgba(20,24,30,.92);
      border:1px solid rgba(255,255,255,.16);
      border-radius: 16px;
      box-shadow: 0 20px 70px rgba(0,0,0,.55);
      display:none;
      z-index: 998;
      overflow:hidden;
      backdrop-filter: blur(10px);
    }
    .notes.open{ display:block; }
    .notes .bar{
      height: 42px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 0 10px 0 12px;
      border-bottom:1px solid rgba(255,255,255,.12);
      cursor: move;
      user-select:none;
      font-family: var(--ui);
      background: rgba(0,0,0,.18);
    }
    .notes .bar .left{
      display:flex;
      align-items:center;
      gap:8px;
      font-weight: 900;
      font-size: 13px;
      color: rgba(255,255,255,.92);
    }
    .notes .bar .dot{
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(240,195,106,.85);
      box-shadow: 0 0 0 3px rgba(240,195,106,.20);
    }
    .notes .bar .actions{
      display:flex;
      gap:8px;
    }
    .notes .bar button{
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.92);
      padding:5px 9px;
      border-radius: 999px;
      cursor:pointer;
      font-weight:900;
      font-size: 12px;
      font-family: var(--ui);
    }
    .notes .bar button:hover{ background: rgba(240,195,106,.18); border-color: rgba(240,195,106,.35); }
    .notes textarea{
      width:100%;
      height: calc(100% - 42px);
      border:0;
      outline:0;
      resize:none;
      background: transparent;
      color: rgba(255,255,255,.90);
      padding: 10px 12px 12px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size: 13px;
      line-height: 1.45;
    }
    .notes .status{
      position:absolute;
      left: 12px;
      bottom: 10px;
      font-family: var(--ui);
      font-size: 11px;
      color: rgba(255,255,255,.62);
      pointer-events:none;
    }
    .notes .count{
      position:absolute;
      right: 12px;
      bottom: 10px;
      font-family: var(--ui);
      font-size: 11px;
      color: rgba(255,255,255,.62);
      pointer-events:none;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header class="top">
      <div class="title">
        <b>Pirandello — Così è (se vi pare)</b>
        <span>Lezione + brani (testo a tendina) · layout identico alla lezione precedente</span>
      </div>
      <div class="tools">
        <div class="toggle" role="tablist" aria-label="Modalità pagine">
          <button id="onePageBtn" class="active" aria-selected="true" type="button">1 pagina</button>
          <button id="twoPageBtn" aria-selected="false" type="button">2 pagine</button>
        </div>
        <div class="ctrl" title="Dimensione testo">
          <span>Testo</span>
          <input id="fontSize" type="range" min="15" max="21" value="17" />
        </div>
      </div>
    </header>

    <section class="book two" id="book">
      <!-- LEFT -->
      <aside class="side">
        <div class="author-card">
          <div class="frame" id="authorFrame" title="Clicca: parte il video">
            <img id="authorImg" src="assets/IMG_3728.jpeg" alt="Pirandello (clicca per video)" />
            <div class="video-box" id="videoBox" aria-hidden="true"></div>
            <div class="hint">Clicca: video</div>
          </div>
        </div>

        <nav class="index" aria-label="Indice">
          <h3>Indice</h3>
          <a href="Umorismo.html">L’Umorismo</a>
          <a href="Novelle.html">Le novelle</a>
          <a href="Romanzi.html">I romanzi</a>
          <a href="Mattia.html">— Il fu Mattia Pascal</a>
          <a href="Uno.html">— Uno, nessuno e centomila</a>
          <a href="Teatro.html">Il teatro</a>
          <a href="Cosi.html" class="active">— Così è (se vi pare)</a>
          <a href="Sei.html">— Sei personaggi in cerca d’autore</a>
          <a href="Conclusione.html">Conclusione</a>
        </nav>

        <button class="notes-btn" id="openNotes" type="button">Appunti</button>
      </aside>

      <!-- RIGHT -->
      <div class="stage">
        <div class="pages">

          <!-- PAGE 1 -->
          <article class="page" id="page1">
            <div class="inner">
              <div class="meta">
                <span>Teatro</span>
                <span>1917</span>
                <span>verità relativa</span>
                <span>incomunicabilità</span>
              </div>

              <h1>Così è (se vi pare)</h1>
              <p>Questa commedia, tratta dalla novella <em>La signora Frola e il signor Ponza, suo genero</em>, fu rappresentata per la prima volta nel 1917. È una delle opere più celebri di Pirandello e affronta il tema cardine della sua poetica: la relatività della verità e l’incomunicabilità tra gli individui.</p>

              <h2>Trama</h2>
              <p>In una cittadina di provincia arriva una famiglia composta dal signor Ponza, la moglie e la suocera, signora Frola. La loro vita suscita subito sospetti: la madre e la figlia non si incontrano mai, mentre Ponza visita ogni giorno la suocera. La comunità, incuriosita, pretende spiegazioni.</p>
              <p>Il prefetto interroga separatamente Ponza e la Frola, ottenendo due versioni opposte. Ponza sostiene che la sua prima moglie, figlia della Frola, sia morta nel terremoto, e che la suocera, impazzita, creda che la sua attuale moglie sia ancora la figlia defunta. Per pietà, le impedisce di incontrarla. La signora Frola, al contrario, afferma che Ponza è impazzito: la moglie non è morta, ma lui, convinto del contrario, ha costretto tutti a vivere in quell’inganno.</p>
              <p>Alla fine appare in scena la signora Ponza, velata, che dichiara: «Io sono la figlia della signora Frola… e la seconda moglie del signor Ponza… e per me nessuna, nessuna!». Quando il prefetto le obietta: «Non può essere entrambe», lei risponde con decisione: «Nossignori. Per me, io sono colei che mi si crede».</p>

              <figure class="inline-media">
                <img class="thumb" src="assets/Cosi1.png" alt="Così è (se vi pare) — trama e personaggi" data-title="Così è (se vi pare) — trama e personaggi" />
                <figcaption>Schema visivo — trama e nucleo del conflitto.</figcaption>
              </figure>

              <h2>Una commedia corale</h2>
              <p>L’opera è definita una commedia corale perché non ha un protagonista unico. Il portavoce delle idee pirandelliane è il personaggio di Laudisi, che interviene solo in alcuni momenti ma offre la chiave di lettura filosofica.</p>

              <h2>Filosofia dell’incomunicabilità</h2>
              <p>Attraverso Laudisi, Pirandello mostra che la verità non è unica: ognuno possiede la propria, valida quanto quella degli altri. Questa molteplicità genera incomunicabilità, perché l’uomo moderno non accetta l’idea di verità plurali e soggettive.</p>

              <h2>Critica alla società borghese</h2>
              <p>La commedia smaschera l’illusione positivista di una realtà unica e oggettiva. Freud aveva già rivelato la complessità della psiche umana, e Pirandello applica questa prospettiva al vivere sociale: esistono tante realtà quanti sono gli individui. La borghesia, però, non accetta questa visione e continua a cercare un’unica certezza.</p>

              <h2>Poetica dell’umorismo</h2>
              <p>Nell’opera è chiara anche la poetica dell’umorismo. I borghesi vedono nel comportamento della famiglia Ponza solo il lato comico (avvertimento del contrario). Laudisi, invece, rappresenta il sentimento del contrario: comprende la tragicità nascosta e invita a non forzare oltre la ricerca della verità. Ma la curiosità prevale, e la verità si presenta velata, dimessa, sfuggente.</p>

              <h2>Significato</h2>
              <p><em>Così è (se vi pare)</em> mostra che la verità non è mai assoluta, ma fragile, plurale e relativa. Pirandello mette in scena i limiti delle certezze occidentali, rivelando che la verità non si impone con voce solenne: appare invece discreta, quasi restia, pronta a mostrarsi solo a chi accetta la sua natura sfuggente.</p>

              <figure class="inline-media">
                <img class="thumb" src="assets/Cosi2.png" alt="Così è (se vi pare) — chiavi di lettura" data-title="Così è (se vi pare) — chiavi di lettura" />
                <figcaption>Schema visivo — incomunicabilità, critica al positivismo e umorismo.</figcaption>
              </figure>

            </div>
          </article>

          <!-- PAGE 2 -->
          <article class="page" id="page2">
            <div class="inner">
              <div class="meta">
                <span>Brani</span>
                <span>lettura guidata</span>
                <span>testo a tendina</span>
                <span>richiudibile</span>
              </div>

              <h1>L’incomunicabilità e il nuovo eroe pirandelliano nel testo</h1>

              <section class="brano">
                <h2>L’avvertimento del contrario</h2>
                <p class="spiega">L’“avvertimento del contrario” entra anche nell’arte attraverso il tema dell’incomunicabilità. Gli attori, non comprendendo fino in fondo il dramma dei personaggi, ne restituiscono soltanto una caricatura. Questo ci fa sorridere, ma non ci consente di coglierne il dolore nascosto.</p>
              </section>

              <section class="brano">
                <h2>Critica al positivismo</h2>
                <p class="spiega">Pirandello polemizza con il positivismo, che pretende di giungere alla verità attraverso l’analisi dei fatti. La verità, per lo scrittore, non si trova nei dati esteriori, ma nell’animo degli individui. Si ribalta così il concetto stesso di verità: non più conoscibile attraverso la scienza, ma comprensibile solo mediante l’introspezione.</p>
                <details class="toggle-brano">
                  <summary>Apri il testo originale: dialogo sui “dati di fatto”</summary>
                  <div class="testo-brano"><div class="txt">
                    <p><strong>SIRELLI</strong> – Ebbene?</p>
                    <p><strong>AGAZZI</strong> – Niente.</p>
                    <p><strong>SIRELLI</strong> – Non si trova niente?</p>
                    <p><strong>AGAZZI</strong> – Tutto disperso o distrutto: Municipio, archivio, stato civile.</p>
                    <p><strong>SIRELLI</strong> – Ma la testimonianza almeno di qualche superstite?</p>
                    <p><strong>AGAZZI</strong> – Non si ha notizia di superstiti; e se pure ce ne sono, ricerche difficilissime, ormai!</p>
                    <p><strong>SIRELLI</strong> – Cosicché non ci resta che da credere all’uno o da credere all’altra, così, senza prove?</p>
                    <p><strong>AGAZZI</strong> – Purtroppo!</p>
                    <p><strong>LAUDISI</strong> – Volete seguire il mio consiglio? Credete a tutti e due.</p>
                    <p><strong>SIRELLI</strong> – Mancano le prove, i dati di fatto; ma la verità, perdio, sarà da una parte o dall’altra!</p>
                    <p><strong>LAUDISI</strong> – Voi, non io, avete bisogno dei dati di fatto, dei documenti, per affermare o negare! Io non so che farmene, perché per me la realtà non consiste in essi, ma nell’animo di quei due…</p>
                  </div></div>
                </details>
              </section>

              <section class="brano">
                <h2>Filosofia dell’incomunicabilità</h2>
                <p class="spiega">La realtà ha infinite facce, ma ciascuno ne vede soltanto una e la considera l’unica verità. Da qui nasce l’incomunicabilità: ognuno giudica dal proprio punto di vista senza riconoscere la validità della prospettiva altrui.</p>
                <details class="toggle-brano">
                  <summary>Apri il testo originale: “Tu per me… io per gli altri…”</summary>
                  <div class="testo-brano"><div class="txt">
                    <p><strong>LAUDISI</strong> – Oh, eccoti qua! Eh caro! Chi è il pazzo di noi due? Io dico “tu”, e tu col dito indichi me… Il guaio è che, come ti vedo io, non ti vedono gli altri! E allora, caro mio, che diventi tu?… Un fantasma, caro, un fantasma!</p>
                    <p><strong>CAMERIERE</strong> – Signor Lamberto.</p>
                    <p><strong>LAUDISI</strong> – Eh?</p>
                    <p><strong>CAMERIERE</strong> – Ci sono due signore…</p>
                    <p><strong>LAUDISI</strong> – Io? No. Quello che conoscono loro, semmai!</p>
                    <p><strong>CAMERIERE</strong> – Non capisco…</p>
                    <p><strong>LAUDISI</strong> – Con chi stai parlando tu?</p>
                  </div></div>
                </details>
              </section>

              <section class="brano">
                <h2>Sociologia dell’incomunicabilità</h2>
                <p class="spiega">Il problema non riguarda solo l’individuo: anche la società si regge su visioni parziali che si scontrano senza sintesi. La borghesia, figlia del positivismo, pretende un’oggettività che non esiste più: la realtà è creata dai singoli e varia con le loro esperienze.</p>
                <details class="toggle-brano">
                  <summary>Apri il testo originale: “Io cambio dall’uno all’altro”</summary>
                  <div class="testo-brano"><div class="txt">
                    <p><strong>LAUDISI</strong> – Tutt’e due, qua, vedete me… Mi vedete, è vero?</p>
                    <p><strong>SIRELLI</strong> – Eh sfido!</p>
                    <p><strong>LAUDISI</strong> – E lei è sicura di toccarmi come mi vede?… Ma per carità, non dica a suo marito come mi vede, perché le dirà che s’inganna…</p>
                    <p><strong>SIGNORA SIRELLI</strong> – E come, dunque, lei cambia dall’uno all’altro?</p>
                    <p><strong>LAUDISI</strong> – Ma sicuro che cambio, signora mia! E lei no, forse? Non cambia?</p>
                    <p><strong>LAUDISI</strong> – Rispetti ciò che vedono e toccano gli altri, anche se sia il contrario!</p>
                  </div></div>
                </details>
              </section>

              <section class="brano">
                <h2>Il sentimento del contrario</h2>
                <p class="spiega">La famiglia Ponza, a prima vista, sembra comica (madre e figlia che non si incontrano mai, mentre il genero visita ogni giorno la suocera). Ma la riflessione ci porta oltre: intuiamo la tragedia nascosta, il dolore per una perdita. È questo che trasforma il riso in compassione.</p>
              </section>

              <section class="brano">
                <h2>Il nuovo eroe: il “nessuno”</h2>
                <p class="spiega">L’incomunicabilità, unita alla filosofia del flusso vitale, genera il nuovo eroe pirandelliano: il <em>nessuno</em>. È chi ha smarrito l’identità, soffocata dalle maschere sociali. Non potendo essere “uno” soltanto, e ridotto a “centomila” immagini diverse, l’uomo moderno finisce per scoprirsi “nessuno”.</p>
                <details class="toggle-brano">
                  <summary>Apri il testo originale: “Io sono colei che mi si crede”</summary>
                  <div class="testo-brano"><div class="txt">
                    <p><strong>SIGNORA PONZA</strong> – Che altro possono volere da me, dopo questo, lor signori? Qui c’è una sventura che deve restar nascosta…</p>
                    <p><strong>IL PREFETTO</strong> – Vorremmo però che lei ci dicesse…</p>
                    <p><strong>SIGNORA PONZA</strong> – La verità? È solo questa: che io sono, sì, la figlia della signora Frola… e la seconda moglie del signor Ponza… Sì; e per me nessuna! Nessuna!</p>
                    <p><strong>SIGNORA PONZA</strong> – Nossignori. Per me, io sono colei che mi si crede.</p>
                  </div></div>
                </details>
              </section>

              <h1>Vocabolario dei termini chiave – <em>Così è (se vi pare)</em></h1>
              <ul>
                <li><strong>Relatività della verità</strong>: la verità non è unica e oggettiva, ma molteplice e soggettiva.</li>
                <li><strong>Incomunicabilità</strong>: incapacità degli individui di comprendersi, poiché ognuno possiede la propria verità personale.</li>
                <li><strong>Curiosità borghese</strong>: ricerca ossessiva della “verità” come fosse un dato oggettivo.</li>
                <li><strong>Laudisi</strong>: portavoce delle idee pirandelliane; mostra la natura plurale e sfuggente della realtà.</li>
                <li><strong>Signora Ponza</strong>: figura enigmatica che incarna l’impossibilità di stabilire un’identità univoca; «io sono colei che mi si crede».</li>
                <li><strong>Maschera sociale</strong>: forma esteriore che ciascuno indossa davanti agli altri.</li>
                <li><strong>Avvertimento del contrario</strong>: livello comico dato dal contrasto tra apparenza e realtà.</li>
                <li><strong>Sentimento del contrario</strong>: riflessione che rivela la tragicità nascosta dietro il riso.</li>
              </ul>

              <h1>Saperi irrinunciabili – <em>Così è (se vi pare)</em></h1>
              <ol>
                <li>L’opera (1917), tratta dalla novella <em>La signora Frola e il signor Ponza, suo genero</em>, mette in scena la relatività della verità.</li>
                <li>La trama ruota attorno a due versioni opposte: quella del signor Ponza e quella della signora Frola.</li>
                <li>La comparsa della signora Ponza, velata, mantiene l’enigma: «Io sono colei che mi si crede».</li>
                <li>Laudisi esplicita l’idea chiave: la verità è plurale, e proprio per questo comunicare davvero diventa difficilissimo.</li>
                <li>La commedia smaschera le certezze borghesi e l’illusione positivista di una realtà unica e oggettiva.</li>
                <li>È presente la poetica dell’umorismo: dal comico (avvertimento del contrario) alla tragicità nascosta (sentimento del contrario).</li>
                <li>La verità non si impone: resta fragile, relativa, sempre filtrata da sguardi soggettivi.</li>
                <li>È uno dei vertici della riflessione pirandelliana su identità e incomunicabilità.</li>
              </ol>

            </div>
          </article>

        </div>
      </div>
    </section>
  </div>

  <!-- IMAGE POPUP -->
  <div class="img-pop" id="imgPop" aria-hidden="true">
    <div class="panel" id="popPanel" role="dialog" aria-modal="true" aria-label="Immagine ingrandita">
      <div class="pop-top">
        <div class="title" id="popTitle">Immagine</div>
        <div class="pop-actions">
          <button type="button" id="zoomIn">Zoom +</button>
          <button type="button" id="zoomOut">Zoom −</button>
          <button type="button" id="resetPop">Reset</button>
          <button type="button" id="closePop">Chiudi</button>
        </div>
      </div>
      <div class="pop-body" id="popBody">
        <img id="popImg" alt="Immagine" />
        <div class="resize-handle" id="popResize" title="Ridimensiona finestra"></div>
      </div>
    </div>
  </div>

  <!-- NOTES -->
  <div class="notes" id="notesWin" aria-hidden="true">
    <div class="bar" id="notesDrag" title="Trascina la finestra">
      <div class="left">
        <span class="dot" aria-hidden="true"></span>
        <span>Appunti</span>
      </div>
      <div class="actions">
        <button type="button" id="exportNotes">Export .txt</button>
        <button type="button" id="closeNotes">Chiudi</button>
      </div>
    </div>
    <textarea id="notesText" placeholder="Scrivi qui… (autosave)"></textarea>
    <div class="status" id="status">Salvato</div>
    <div class="count" id="counter">0 caratteri</div>
  </div>

  <script>
    // ====== INDICE ======
    document.querySelectorAll('.index a').forEach(a=>{
      a.addEventListener('click',(e)=>{
        const href=a.getAttribute('href');
        if(!href || !href.startsWith('#')) return;
        const target=document.querySelector(href);
        if(!target) return;
        e.preventDefault();
        target.scrollIntoView({behavior:'smooth', block:'start'});
      });
    });

    // ====== 2 PAGINE ======
    const onePageBtn=document.getElementById('onePageBtn');
    const twoPageBtn=document.getElementById('twoPageBtn');
    function setMode(two){
      document.getElementById('book').classList.toggle('two', two);
      onePageBtn.classList.toggle('active', !two);
      twoPageBtn.classList.toggle('active', two);
      onePageBtn.setAttribute('aria-selected', (!two).toString());
      twoPageBtn.setAttribute('aria-selected', (two).toString());
    }
    onePageBtn.addEventListener('click',()=>setMode(false));
    twoPageBtn.addEventListener('click',()=>setMode(true));

    // ====== FONT SIZE ======
    const fontSize=document.getElementById('fontSize');
    function applyFont(){
      const size=fontSize.value;
      document.querySelectorAll('.page p, .page li').forEach(el=>el.style.fontSize = size+'px');
      document.querySelectorAll('.page h1').forEach(el=>el.style.fontSize = (parseInt(size)+10)+'px');
    }
    fontSize.addEventListener('input', applyFont);
    applyFont();

    // ====== IMAGE POPUP (zoom/pan/reset + resize) ======
    const imgPop=document.getElementById('imgPop');
    const popImg=document.getElementById('popImg');
    const popTitle=document.getElementById('popTitle');
    const closePop=document.getElementById('closePop');
    const zoomIn=document.getElementById('zoomIn');
    const zoomOut=document.getElementById('zoomOut');
    const resetPop=document.getElementById('resetPop');
    const popBody=document.getElementById('popBody');
    const popPanel=document.getElementById('popPanel');
    const popResize=document.getElementById('popResize');

    let pscale=1, ptx=0, pty=0;
    let pdrag={active:false, x:0, y:0};

    const clamp=(n,min,max)=>Math.max(min, Math.min(max,n));
    const applyPopTransform=()=> {
      popImg.style.transform = `translate(calc(-50% + ${ptx}px), calc(-50% + ${pty}px)) scale(${pscale})`;
    };

    function openImagePop(src,title){
      popImg.src=src;
      popTitle.textContent=title || 'Immagine';
      pscale=1; ptx=0; pty=0; applyPopTransform();

      imgPop.classList.add('open');
      imgPop.setAttribute('aria-hidden','false');
      document.body.style.overflow='hidden';
    }
    function closeImagePopFn(){
      imgPop.classList.remove('open');
      imgPop.setAttribute('aria-hidden','true');
      document.body.style.overflow='';
      popImg.src='';
    }

    document.querySelectorAll('img.thumb').forEach(img=>{
      img.addEventListener('click', ()=>{
        openImagePop(img.getAttribute('src'), img.dataset.title || img.alt);
      });
    });

    closePop.addEventListener('click', closeImagePopFn);
    imgPop.addEventListener('click', (e)=>{ if(e.target===imgPop) closeImagePopFn(); });
    window.addEventListener('keydown', (e)=>{
      if(e.key==='Escape' && imgPop.classList.contains('open')) closeImagePopFn();
    });

    zoomIn.addEventListener('click', ()=>{ pscale = clamp(pscale+0.15, 0.4, 6); applyPopTransform(); });
    zoomOut.addEventListener('click', ()=>{ pscale = clamp(pscale-0.15, 0.4, 6); applyPopTransform(); });
    resetPop.addEventListener('click', ()=>{ pscale=1; ptx=0; pty=0; applyPopTransform(); });

    popBody.addEventListener('mousedown', (e)=>{
      pdrag.active=true;
      pdrag.x=e.clientX - ptx;
      pdrag.y=e.clientY - pty;
      popBody.style.cursor='grabbing';
    });
    window.addEventListener('mousemove', (e)=>{
      if(!pdrag.active) return;
      ptx = e.clientX - pdrag.x;
      pty = e.clientY - pdrag.y;
      applyPopTransform();
    });
    window.addEventListener('mouseup', ()=>{
      pdrag.active=false;
      popBody.style.cursor='grab';
    });

    popBody.addEventListener('wheel', (e)=>{
      if(!imgPop.classList.contains('open')) return;
      e.preventDefault();
      const delta = Math.sign(e.deltaY);
      pscale = clamp(pscale + (delta<0 ? 0.12 : -0.12), 0.4, 6);
      applyPopTransform();
    }, {passive:false});

    // resize modal panel
    let rdrag=false, r0={x:0,y:0,w:0,h:0};
    popResize.addEventListener('mousedown', (e)=>{
      e.preventDefault();
      rdrag=true;
      const rect = popPanel.getBoundingClientRect();
      r0={x:e.clientX, y:e.clientY, w:rect.width, h:rect.height};
    });
    window.addEventListener('mousemove', (e)=>{
      if(!rdrag) return;
      const nw = clamp(r0.w + (e.clientX - r0.x), 320, window.innerWidth-40);
      const nh = clamp(r0.h + (e.clientY - r0.y), 240, window.innerHeight-40);
      popPanel.style.width = nw+'px';
      popPanel.style.height = nh+'px';
      popBody.style.height = `calc(${nh}px - 46px)`;
    });
    window.addEventListener('mouseup', ()=>{ rdrag=false; });

    // ====== FOTO -> VIDEO (stesso riquadro) ======
    const authorFrame=document.getElementById('authorFrame');
    const authorImg=document.getElementById('authorImg');
    const videoBox=document.getElementById('videoBox');

    function toEmbed(url){
      // supporta shorts e watch?v=
      try{
        const u = new URL(url);
        if(u.hostname.includes('youtube.com')){
          if(u.pathname.startsWith('/shorts/')){
            const id=u.pathname.split('/shorts/')[1].split('/')[0];
            return `https://www.youtube.com/embed/${id}?autoplay=1&rel=0`;
          }
          const v=u.searchParams.get('v');
          if(v) return `https://www.youtube.com/embed/${v}?autoplay=1&rel=0`;
        }
        if(u.hostname==='youtu.be'){
          const id=u.pathname.replace('/','');
          return `https://www.youtube.com/embed/${id}?autoplay=1&rel=0`;
        }
      }catch(_){}
      return url;
    }

    const videoUrl = "https://youtube.com/shorts/9pYdHj98EaU?si=Fqf5S9Yq--MZIein";
    const embedUrl = toEmbed(videoUrl);

    function showVideo(){
      videoBox.innerHTML = `<iframe src="${embedUrl}" title="Video" allow="autoplay; encrypted-media; fullscreen" allowfullscreen></iframe>`;
      videoBox.style.display='block';
      videoBox.setAttribute('aria-hidden','false');
      authorImg.style.display='none';
    }
    function showImage(){
      videoBox.innerHTML='';
      videoBox.style.display='none';
      videoBox.setAttribute('aria-hidden','true');
      authorImg.style.display='block';
    }

    authorFrame.addEventListener('click', ()=>{
      const isVideo = videoBox.style.display==='block';
      if(isVideo) showImage(); else showVideo();
    });

    // ====== NOTES (localStorage + posizione + export) ======
    const notesWin=document.getElementById('notesWin');
    const openNotes=document.getElementById('openNotes');
    const closeNotes=document.getElementById('closeNotes');
    const notesText=document.getElementById('notesText');
    const notesDrag=document.getElementById('notesDrag');
    const exportNotes=document.getElementById('exportNotes');
    const status=document.getElementById('status');
    const counter=document.getElementById('counter');

    const keyBase = location.pathname.replace(/\\/+/g,'/'); // separati per file
    const notesKey = 'notes:'+keyBase;
    const posKey = 'notespos:'+keyBase;

    function setSaved(){
      status.textContent='Salvato';
      status.style.opacity='1';
      setTimeout(()=>status.style.opacity='.65', 450);
    }

    function loadNotes(){
      const v = localStorage.getItem(notesKey);
      if(v!==null) notesText.value=v;
      counter.textContent = `${notesText.value.length} caratteri`;
    }
    function saveNotes(){
      localStorage.setItem(notesKey, notesText.value);
      setSaved();
      counter.textContent = `${notesText.value.length} caratteri`;
    }
    let saveT=null;
    notesText.addEventListener('input', ()=>{
      status.textContent='...';
      if(saveT) clearTimeout(saveT);
      saveT=setTimeout(saveNotes, 250);
    });

    function loadPos(){
      const raw = localStorage.getItem(posKey);
      if(!raw) return;
      try{
        const p = JSON.parse(raw);
        if(typeof p.x==='number' && typeof p.y==='number'){
          notesWin.style.left = p.x+'px';
          notesWin.style.top = p.y+'px';
          notesWin.style.right = 'auto';
          notesWin.style.bottom = 'auto';
          notesWin.style.position = 'fixed';
        }
      }catch(_){}
    }
    function savePos(x,y){
      localStorage.setItem(posKey, JSON.stringify({x,y}));
    }

    openNotes.addEventListener('click', ()=>{
      notesWin.classList.add('open');
      notesWin.setAttribute('aria-hidden','false');
      loadNotes();
      loadPos();
      notesText.focus();
    });
    closeNotes.addEventListener('click', ()=>{
      notesWin.classList.remove('open');
      notesWin.setAttribute('aria-hidden','true');
      saveNotes();
      const rect=notesWin.getBoundingClientRect();
      savePos(rect.left, rect.top);
    });

    exportNotes.addEventListener('click', ()=>{
      const blob = new Blob([notesText.value], {type:'text/plain;charset=utf-8'});
      const a=document.createElement('a');
      a.href=URL.createObjectURL(blob);
      a.download = 'appunti-cosi-e-se-vi-pare.txt';
      document.body.appendChild(a);
      a.click();
      a.remove();
      setTimeout(()=>URL.revokeObjectURL(a.href), 800);
    });

    // drag notes
    let nd={active:false, dx:0, dy:0};
    notesDrag.addEventListener('mousedown', (e)=>{
      nd.active=true;
      const rect=notesWin.getBoundingClientRect();
      nd.dx = e.clientX - rect.left;
      nd.dy = e.clientY - rect.top;
    });
    window.addEventListener('mousemove', (e)=>{
      if(!nd.active) return;
      const x = clamp(e.clientX - nd.dx, 6, window.innerWidth - notesWin.offsetWidth - 6);
      const y = clamp(e.clientY - nd.dy, 6, window.innerHeight - notesWin.offsetHeight - 6);
      notesWin.style.left = x+'px';
      notesWin.style.top = y+'px';
      notesWin.style.right='auto';
      notesWin.style.bottom='auto';
    });
    window.addEventListener('mouseup', ()=>{
      if(!nd.active) return;
      nd.active=false;
      const rect=notesWin.getBoundingClientRect();
      savePos(rect.left, rect.top);
    });

    // inizializza
    loadNotes();
  </script>
</body>
</html>
